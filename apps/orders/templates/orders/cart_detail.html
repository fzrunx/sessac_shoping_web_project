{% extends 'main/base.html' %}

{% block main_title %}
<div class="heading_container heading_center">
    <br><br>
    <h1>장바구니</h1>
</div>
{% endblock %}

{% block content %}
{% if cart_count == 0 %}
    <p style="text-align:center; font-size:1.2rem; color:#94a3b8; margin-top:3rem;">
        장바구니가 비어있습니다.
    </p>
{% endif %}
<div class="cart-container" style="
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    border: 1px solid #e5e7eb;
    max-width: 900px;
    margin: 2rem auto;
    padding: 1.5rem;
">

    <!-- 장바구니 테이블 -->
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="border-bottom: 2px solid #ddd;">
                <th style="padding: 12px 8px; text-align: left;">상품명</th>
                <th style="padding: 12px 8px; text-align: center; min-width: 60px;">수량</th>
                <th style="padding: 12px 8px; text-align: right; min-width: 100px;">단가</th>
                <th style="padding: 12px 8px; text-align: right; min-width: 100px;">합계</th>
                <th style="padding: 12px 8px; text-align: center; min-width: 60px;">삭제</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 10px 8px;">{{ item.menu.name }}</td>
                <td style="padding: 10px 8px; text-align: center;">{{ item.quantity }}</td>
                <td style="padding: 10px 8px; text-align: right;">{{ item.menu.price|floatformat:0 }}원</td>
                <td style="padding: 10px 8px; text-align: right;">{{ item.total_price|floatformat:0 }}원</td>
                <td style="padding: 10px 8px; text-align: center;">
                    <form method="post" action="{% url 'orders:cart_remove_api' %}">
                        {% csrf_token %}
                        <input type="hidden" name="cart_item_id" value="{{ item.id }}">
                        <button type="submit" style="background:none; border:none; color:#e53e3e; cursor:pointer;">삭제</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- 합계 및 버튼 영역 -->
    <div style="margin-top: 1.5rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
        <div style="font-weight: 700; font-size: 1.25rem; color: #1e293b;">
            총 합계: {{ cart_total|floatformat:0 }}원 ({{ cart_count }}개)
        </div>
        <div style="display: flex; gap: 0.75rem;">
            <form method="post" action="{% url 'orders:cart_clear_api' %}">
                {% csrf_token %}
                <button type="submit" style="
                    padding: 0.6rem 1.2rem;
                    border-radius: 6px;
                    border:none;
                    background:#e53e3e;
                    color:white;
                    font-weight: 600;
                    cursor:pointer;
                    transition: background-color 0.3s ease;
                " onmouseover="this.style.background='#c53030'" onmouseout="this.style.background='#e53e3e'">
                    전체 비우기
                </button>
            </form>

            <a href="{% url 'orders:order_create' %}" style="
                padding: 0.6rem 1.2rem;
                background:#2563eb;
                color:white;
                border-radius: 6px;
                font-weight: 600;
                text-decoration:none;
                display: flex;
                align-items: center;
                cursor: pointer;
                transition: background-color 0.3s ease;
            " onmouseover="this.style.background='#1e40af'" onmouseout="this.style.background='#2563eb'">
                <i class="fas fa-credit-card" style="margin-right: 0.5rem;"></i> 결제하기
            </a>
        </div>
    </div>

</div>

{% endblock %}